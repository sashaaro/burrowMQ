<p align="right">
  <a href="README.md">üá¨üáß English</a>
</p>

# üê∞ BurrowMQ Server ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π AMQP 0.9.1 —Å–µ—Ä–≤–µ—Ä –Ω–∞ Rust

**BurrowMQ** ‚Äî —ç—Ç–æ –ª–µ–≥–∫–æ–≤–µ—Å–Ω–∞—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞ AMQP 0.9.1 –Ω–∞ —è–∑—ã–∫–µ Rust.\
–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –±–∞–∑–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—á–µ—Ä–µ–¥–µ–π, –æ–±–º–µ–Ω–Ω–∏–∫–æ–≤ –∏ –¥–æ—Å—Ç–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π.

> ü¶Ä BurrowMQ ‚Äî –ø—Ä–æ–µ–∫—Ç **–¥–ª—è –æ–±—É—á–µ–Ω–∏—è, —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ –∏ –≥–ª—É–±–æ–∫–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ AMQP**. –¢–∞–∫–∂–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏ –∏–∑—É—á–µ–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–æ–≤ –≤ —è–∑—ã–∫–µ Rust.

> üï≥Ô∏è –ü–æ—á–µ–º—É Burrow? –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ—Ç –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —Å–ª–æ–≤–∞ "burrow" ‚Äî –Ω–æ—Ä–∞, –ø–æ–¥–∑–µ–º–Ω—ã–π —Ç–æ–Ω–Ω–µ–ª—å, –≥–¥–µ –ø—Ä—è—á—É—Ç—Å—è –∫—Ä–æ–ª–∏–∫–∏. –ü–æ–¥–æ–±–Ω–æ –∫—Ä–æ–ª–∏–∫—É –∏–∑ RabbitMQ, BurrowMQ ‚Äî —ç—Ç–æ –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è AMQP, —Ä–∞–±–æ—Ç–∞—é—â–∞—è "–≤–≥–ª—É–±—å" –ø—Ä–æ—Ç–æ–∫–æ–ª–∞, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –±–∞–∑–æ–≤—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–æ—Å—Ç–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π. –≠—Ç–æ –æ—Ç—Å—ã–ª–∫–∞ –∫ –∫–æ—Ä–Ω—è–º –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ RabbitMQ, –Ω–æ –≤ –±–æ–ª–µ–µ —É–ø—Ä–æ—â—ë–Ω–Ω–æ–π –∏ –ø–æ–Ω—è—Ç–Ω–æ–π —Ñ–æ—Ä–º–µ ‚Äî –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤.
>
> ü§ì –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ, –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ –æ–±—ã–≥—Ä—ã–≤–∞–µ—Ç—Å—è —Å–æ–∑–≤—É—á–∏–µ —Å–æ —Å–ª–æ–≤–æ–º borrow (–∫–∞–∫ –≤ borrow checker –≤ Rust). –•–æ—Ç—è —ç—Ç–æ –∏ –∏–≥—Ä–∞ —Å–ª–æ–≤, BurrowMQ —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç —Å–ª—É–∂–∏—Ç—å —Ö–æ—Ä–æ—à–∏–º —Å–ø–æ—Å–æ–±–æ–º –ø–æ–ø—Ä–∞–∫—Ç–∏–∫–æ–≤–∞—Ç—å—Å—è –≤ –ø–æ–Ω–∏–º–∞–Ω–∏–∏ –≤–ª–∞–¥–µ–Ω–∏—è, –∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –≤ —Å—Ç–∏–ª–µ Rust.

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –û–±—ä—è–≤–ª–µ–Ω–∏–µ –æ—á–µ—Ä–µ–¥–µ–π (`queue.declare`)
- ‚úÖ –û–±—ä—è–≤–ª–µ–Ω–∏–µ –æ–±–º–µ–Ω–Ω–∏–∫–æ–≤ (`exchange.declare`) ‚Äî `direct`, `fanout`
- ‚úÖ –ü—Ä–∏–≤—è–∑–∫–∏ –æ—á–µ—Ä–µ–¥–µ–π –∫ –æ–±–º–µ–Ω–Ω–∏–∫–∞–º (`queue.bind`)
- ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π (`basic.ack`)
- ‚úÖ –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π (`basic.publish`), –≤–∫–ª—é—á–∞—è –±–∞–∑–æ–≤—ã–µ –ø—Ä–∏–º–µ—Ä—ã —Å `direct` exchange –∏ `default exchange` (`exchange = ""`, `routing_key = queue_name`)
- ‚úÖ –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –æ—á–µ—Ä–µ–¥—å –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π (`basic.consume`)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Heartbeat-—Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ `tokio`
- üß™ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º DSL (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º –Ω–∞ [`nom`](https://github.com/rust-bakery/nom)) –¥–ª—è –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ (publish, consume, ack –∏ –¥—Ä.) –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `lapin` (—Ç–µ—Å—Ç—ã —Å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–º AMQP 0.9.1 –∫–ª–∏–µ–Ω—Ç–æ–º –Ω–∞ Rust) 
    
---

## ‚ùå –ß—Ç–æ –ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

- `exchange` —Ç–∏–ø–∞ `topic`, `headers`
- `exchange.bind`, `exchange.unbind`
- –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π (`publisher confirms`) ‚Äî `confirm.select`
- —É–¥–∞–ª–µ–Ω–∏–µ –æ—á–µ—Ä–µ–¥–µ–π (`queue.delete`)
- `basic.reject`, `basic.nack`
- QoS (`basic.qos`) —Å prefetch_count != 1
- –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (`connection.start-ok` ‚Üí login/password)
- –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–π (–Ω–∞ –¥–∏—Å–∫)
- –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –∏ federation
- Web UI –∏–ª–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥


## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
cargo run -- --port 5672
```

–°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç —Å–ª—É—à–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ `127.0.0.1:5672`.

---

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –¢–µ—Å—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π BurrowMQ —Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É 5672
cargo test
```

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π AMQP-—Å–µ—Ä–≤–µ—Ä (BurrowMQServer) –Ω–∞ –ø–æ—Ä—Ç—É 5672 –∏ –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –∫ –Ω–µ–º—É —Å –ø–æ–º–æ—â—å—é lapin. –í—Å–µ —Ç–µ—Å—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω—ã –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º AMQP 0.9.1 –∏ –¥–æ–ª–∂–Ω—ã –æ–¥–∏–Ω–∞–∫–æ–≤–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ —Å BurrowMQServer, —Ç–∞–∫ –∏ —Å RabbitMQ.

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É —Ç–µ—Å—Ç–æ–≤ —Å —Ä–µ–∞–ª—å–Ω—ã–º RabbitMQ –∏–ª–∏ —Å BurrowMQ, –º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–π:

```bash

# –ü—Ä–∏–º–µ—Ä: –∑–∞–ø—É—Å–∫ RabbitMQ —á–µ—Ä–µ–∑ Docker
docker run -it --rm --name rabbitmq -p 5672:5672 -p 15672:15672 rabbitmq:4-management
# –õ–∏–±–æ –∑–∞–ø—É—Å–∫ BurrowMQ –≤—Ä—É—á–Ω—É—é
cargo run -- --port 5672

# –ó–∞—Ç–µ–º –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Å –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ–º –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
NO_EMBEDDED_AMQP=1 cargo test
```

## ‚öñÔ∏è –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

<p align="center">
  <img src="docs/burrowmq-logo.png" width="200" alt="BurrowMQ logo" />
</p>